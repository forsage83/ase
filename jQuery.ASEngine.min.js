/* ------------------------------------------------------------------------
 Aura Slider Engine ( https://github.com/mrgambal/ase )

 Simple, lightweight and flexible slider engine based on css animation abilities.
 Destination of this slider (and it major advantage) - just to change classes
 on items inside container. You could use all available css-powers to realize
 slider-effect of your dreams.

 Authors: 
 	JS-jedi: Dmitry Gambal ( https://github.com/mrgambal )
 	CSS-jedi: Dmitry Nechepurenko ( https://github.com/dimanech )

 Inspired By: My Friend Dmitry Nechepurenko and some existing solutions

 Dependencies: 
 	jQuery >= 1.7.2
 	jQuery Mobile (if you want to handle swipe events on mobile devices)

 Version: 0.9b

 Copyright: Feel free to redistribute the script/modify it, as
 long as you leave my info at the top.

 ------------------------------------------------------------------------- */
(function(b){"use strict";function a(d,c){this.init(d,c);}a.prototype={__container:null,__current:null,__curIndex:null,__eventNS:".ASEngine",__indexInArray:0,__pgnClass:"js-ase__pagination__item",__pgnContainer:null,__timerID:0,items:null,options:{},defaultOptions:{itemsSelector:".js-ase__item",prevCtrl:null,nextCtrl:null,swipeCtrl:null,nextClass:"js-ase__item_next",currentClass:"js-ase__item_active",prevClass:"js-ase__item_prev",onMove:function(){},onNext:function(){},onPrev:function(){},autoplay:false,autoplayDelay:15000},__addEventHandlers:function(){var g=this,e=g.options,f=function(i){var h=i.href||(i.attributes["data-href"]?i.attributes["data-href"].value:"");return(h!==""&(h!==location.href&&h.indexOf(location.href+"#")<0));},c=function(h){if(f(this)){return;}h.preventDefault();g.goPrev.call(g,true);},d=function(h){if(f(this)){return;}h.preventDefault();g.goNext.call(g,true);};if(g.items.length===0){return g;}if(e.prevCtrl&&e.prevCtrl.length){e.prevCtrl.on("click"+g.__eventNS,c);}if(e.nextCtrl&&e.nextCtrl.length){e.nextCtrl.on("click"+g.__eventNS,d);}if(e.autoplay){g.setAutoplay();}else{g.stopAutoplay();}if(e.swipeCtrl&&e.swipeCtrl.length){e.swipeCtrl.on("swipeleft"+g.__eventNS,d).on("swiperight"+g.__eventNS,c);}g.__container.on("mouseenter"+g.__eventNS,function(){if(g.__timerID){clearInterval(g.__timerID);}}).on("mouseleave"+g.__eventNS,function(){if(e.autoplay){g.setAutoplay.call(g);}});return g;},__changePaginationLink:function(d,e){var f=this,c=f.__pgnClass+"_active";d++;e++;f.__pgnContainer.find("."+c).removeClass(c);f.__pgnContainer.removeClass(f.__pgnClass+"_p"+e).addClass(f.__pgnClass+"_p"+d).find("a[data-href=#"+d+"]")[0].className+=" "+c;return f;},__nextIndex:function(d,c){var e=this;if(d===e.__curIndex){return 0;}if(d>e.items.length-1){if(!c){e.__curIndex=-1;}d=0;}else{if(d<0){if(!c){e.__curIndex=e.items.length;}d=e.items.length-1;}}return d;},__removeEventHandlers:function(){var d=this,c=d.options;if(c.prevCtrl&&c.prevCtrl.length){c.prevCtrl.off(d.__eventNS);}if(c.nextCtrl&&c.nextCtrl.length){c.nextCtrl.off(d.__eventNS);}if(c.swipeCtrl&&c.swipeCtrl.length){c.swipeCtrl.off(d.__eventNS);}if(d.__pgnContainer){d.__pgnContainer.find("."+d.__pgnClass).off(d.__eventNS);}d.__container.off(d.__eventNS);return d;},addPagination:function(c,h,e){if(!c.hasOwnProperty("selector")){c=b(c);}if(!c.length){return false;}var g=this,f=function(j){var i=this.attributes["data-href"].value.substr(this.attributes["data-href"].value.indexOf("#")+1)-1,k=(i<g.__curIndex)?"onPrev":"onNext";j.preventDefault();if(typeof g.options[k]==="function"){g.options[k].call(g);}g.goTo(i,true);};if(h&&h.length){g.__pgnClass=h;}if(!c.find("."+g.__pgnClass).length){for(var d=0;d++<g.items.length;){c[0].innerHTML+=(d===g.__curIndex+1)?["<a data-href='#",d,"' class='",g.__pgnClass," ",(g.__pgnClass+"_active")," ",(e||""),"'>","</a>"].join(""):["<a data-href='#",d,"' class='",g.__pgnClass," ",(e||""),"'>","</a>"].join("");}}c[0].className+=" "+g.__pgnClass+"_p"+(g.__curIndex+1);g.__pgnContainer=c.on("click"+g.__eventNS,"."+g.__pgnClass,f);return g;},goNext:function(c){if(typeof this.options.onNext==="function"){this.options.onNext.call(this);}return this.goTo(this.__curIndex+1,c);},goPrev:function(c){if(typeof this.options.onPrev==="function"){this.options.onPrev.call(this);}return this.goTo(this.__curIndex-1,c);},goTo:function(h,f){if(h===this.__curIndex){return this;}var i=this,d=i.options,e=false,c=0,g=i.__curIndex;h=i.__nextIndex(h);e=h<i.__curIndex;if(Math.abs(h-i.__curIndex)>1){g=i.__nextIndex((e?h+1:h-1),true);}c=i.__nextIndex((e?h-1:h+1),true);if(i.__pgnContainer){i.__changePaginationLink(h,g);}if(f){i.stopAutoplay();}i.items.removeClass(d.prevClass+" "+d.nextClass)[h].className+=" "+(e?d.prevClass:d.nextClass);i.__current.removeClass(d.currentClass);if(i.items.length>1){i.items[g].className+=" "+(e?d.nextClass:d.prevClass);}i.__current=i.items.eq(h).removeClass(e?d.prevClass:d.nextClass).addClass(d.currentClass);i.items[c].className+=" "+(e?d.prevClass:d.nextClass);i.__curIndex=h;if(typeof d.onMove==="function"){d.onMove.call(this);}return i;},setAutoplay:function(c){var d=this;if((c=parseInt(c))){d.options.autoplayDelay=c;}d.stopAutoplay().__timerID=setInterval(function(){d.goNext(false);},d.options.autoplayDelay);d.options.autoplay=true;return d;},stopAutoplay:function(){var c=this;if(c.__timerID){clearInterval(c.__timerID);c.__timerID=c.options.autoplay=false;}return c;},init:function(e,c){var f=this,d=(f.__container||c).data("ASEngine");f.options=b.extend({},(d?d.options:f.defaultOptions),e);f.items=(f.__container=f.__container||c).find(f.options.itemsSelector);if(f.items.length===0){return false;}f.__current=f.items.first().addClass(f.options.currentClass);if(f.items.length>1){f.items[1].className+=" "+f.options.nextClass;}if(f.items.length>2){f.items[f.items.length-1].className+=" "+f.options.prevClass;}f.__curIndex=0;f.__removeEventHandlers().__addEventHandlers();return f;}};b.fn.ASE=function(c){var d=new a(c,this);d.__indexInArray=(window.ASESliders=window.ASESliders||[]).push(d)-1;this.data("ASEngine",d);return d;};})(jQuery);